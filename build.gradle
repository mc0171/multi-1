//plugins {
 // id 'net.researchgate.release' version '2.3.4'
//}

buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath 'net.researchgate:gradle-release:2.3.4'
    }
}

allprojects {
    apply plugin: 'java'
    apply plugin: 'net.researchgate.release'

    ext {
      preReleaseVersion = "0.0.0"
      tagVersion = "0.0.0"
    }

    repositories {
        mavenCentral()
        jcenter()
    }

    release {
        tagTemplate = '$name-$version'
        failOnSnapshotDependencies = false
    }

    task(startmessage) << {
        println 'starting build'
    }

    task(setTagVersion) << {
      project.tagVersion = project.version
    }

    task(setPreReleaseVersion) << {
      project.preReleaseVersion = project.version
    }

    task(printPreReleaseVersion) << {
        println "Project tag version is " + project.tagVersion
    }

    task(printTagVersion) << {
        println "Project pre release version is " + project.preReleaseVersion
    }

    task(printversion) << {
        println "Project version is " + project.version
    }

    beforeReleaseBuild.dependsOn startmessage,setPreReleaseVersion
    unSnapshotVersion.dependsOn printversion,printPreReleaseVersion,setTagVersion
    commitNewVersion.dependsOn printversion,printPreReleaseVersion,printTagVersion
    afterReleaseBuild.dependsOn printversion,printPreReleaseVersion,printTagVersion
}
